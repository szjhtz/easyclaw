# Windows-specific electron-builder configuration
# Extends the base electron-builder.yml (created by W6-A)
# Usage: electron-builder --win --config electron-builder.win.yml

extends: electron-builder.yml

win:
  icon: build/icon.ico
  # Code signing via environment variables:
  #   CSC_LINK  — path or URL to the .pfx / .p12 certificate
  #   CSC_KEY_PASSWORD — certificate password
  # Set these in CI or locally before running the build.
  # If not set, the build will succeed but the binary will be unsigned.

  target:
    - target: nsis
      arch:
        - x64
    - target: portable
      arch:
        - x64

portable:
  artifactName: "${productName}-${version}-portable.${ext}"

nsis:
  artifactName: "${productName}.Setup.${version}.${ext}"
  include: "installer.nsh"
  oneClick: false
  allowToChangeInstallationDirectory: true
  installerSidebar: build/installerSidebar.png
  uninstallDisplayName: "EasyClaw"
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: "EasyClaw"
  # Simplified to single language to avoid NSIS language detection issues
  # Multi-language support can be re-enabled after verifying language codes
  # installerLanguages:
  #   - English
  #   - SimpChinese
  # language: 0409
  # multiLanguageInstaller: true
